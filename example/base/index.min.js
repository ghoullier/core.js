!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){function c(a){var b=Object.create(this);return a?(Object.keys(a).forEach(function(c){b[c]=a[c]}),b):b}function d(){var a=Object.create(this);return"function"==typeof a.constructor&&a.constructor.apply(a,arguments),a}b.exports.extend=c,b.exports.create=d},{}],2:[function(a,b){var c=a("./dom"),d=a("./events"),e=a("./string"),f=a("./utils"),g=a("./class"),h=g.extend({constructor:function(a){this.element=a,this.delegate(),this.initialize()},delegate:function(){var a=this,b="on",c=["data",b].join("-"),d=[];a.$$("["+c+"]").forEach(function(a){d=d.concat(Object.keys(a.dataset).filter(function(a){return a.startsWith(b)&&a.length>b.length}).map(function(a){return a.substring(b.length).toLowerCase()}))}),d.filter(function(a,b,c){return c.indexOf(a)===b}).forEach(function(d){var f="["+[c,d].join("-")+"]";a.on(d,f,function(c){var f=b+e.firstUpperCase(d),g=this.dataset[f],h=a[g];"function"==typeof h?h.call(a,c):console.error("Undefined method",this,g,f)})})},initialize:function(){},getTemplateArgs:function(){var a=this.element.dataset;return{id:a.templateId,uri:a.templateUri,data:this.getTemplateData()}},getTemplateData:function(){},$:function(a,b){return c.$(a,b||this.element)},$$:function(a,b){return c.$$(a,b||this.element)},empty:function(a){for(;a.firstChild;)a.removeChild(a.firstChild)},on:function(a,b,c){d.on(this.element,a,b,c)},bind:function(a){return f.bind(a,this)}});b.exports=h},{"./class":1,"./dom":3,"./events":4,"./string":8,"./utils":9}],3:[function(a,b){function c(a,b){return b=b||document.documentElement,b.querySelector(a)}function d(a,b){return b=b||document.documentElement,e.call(b.querySelectorAll(a))}var e=Array.prototype.slice;b.exports.$=c,b.exports.$$=d},{}],4:[function(a,b){function c(a,b,c){if(f.call(b,c))return b;for(;b=b.parentNode&&a!==b;){if(1!=b.nodeType)return!1;if(f.call(b,c))return b}return!1}function d(a,b,d,e){a.addEventListener(b,function(b){var f=c(a,b.target,d);f&&e.call(f,b)},!1)}var e=document.documentElement,f=e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.msMatchesSelector;b.exports.on=d},{}],5:[function(a,b){function c(a){var b={};return e.$$("input[name]",a).forEach(function(a){var c=a.getAttribute("name");b[c]="checkbox"===a.getAttribute("type")?a.checked:a.value}),b}function d(a,b){e.$$("input[name]",a).forEach(function(a){var c=b[a.getAttribute("name")];"checkbox"===a.getAttribute("type")?a.checked=c:a.value=c})}var e=a("./dom");b.exports.serialize=c,b.exports.unserialize=d},{"./dom":3}],6:[function(a,b){var c=a("./dom"),d=a("./class"),e=a("./controller"),f=d.extend({constructor:function(){var a=this;a.definitions={},a.instances=[],document.addEventListener("DOMContentLoaded",function(){a.bootstrap(document.documentElement)},!1)},add:function(a,b){return this.definitions[a]=b,this},get:function(a){return this.definitions[a]},has:function(a){return e.isPrototypeOf(this.get(a))},getInstanceByNode:function(a){var b=this.instances.filter(function(b){return b.node===a});return b.length>0?b[0].controller:null},bootstrap:function(a){var b=this;c.$$("[data-controller]",a).forEach(function(a){var c=a.dataset;if(null===b.getInstanceByNode(a)){var d=c.controller;b.has(d)?b.instances.push({node:a,controller:b.get(d).create(a)}):"undefined"!=typeof c.lazyload?console.log("Wait for controller definition",d):console.error("Undefined controller",d)}})}});b.exports=f.create()},{"./class":1,"./controller":2,"./dom":3}],7:[function(a,b){var c=a("./class"),d=c.extend({constructor:function(a){this.storage=a},set:function(a,b){this.storage.setItem(a,JSON.stringify({value:b}))},get:function(a){return JSON.parse(this.storage.getItem(a)).value},remove:function(a){this.storage.removeItem(a)},has:function(a){return null!==this.storage.getItem(a)},clear:function(){this.storage.clear()}});b.exports.locale=d.create(window.localStorage),b.exports.session=d.create(window.sessionStorage)},{"./class":1}],8:[function(a,b){function c(a){return a?a.charAt(0).toUpperCase()+a.substring(1):a}b.exports.firstUpperCase=c},{}],9:[function(a,b){function c(a,b){return function(){return a.apply(b,arguments)}}b.exports.bind=c},{}],10:[function(a){var b=a("../../core/manager"),c=a("../../core/form"),d=a("../../core/controller"),e=a("../../core/storage").locale;b.add("Main",d.extend({todos:[],initialize:function(){this.$text=this.$('input[type="text"]'),this.$completed=this.$('input[type="checkbox"]'),this.$list=this.$("ol"),this.$form=this.$("form"),this.load()},add:function(a){var b=document.createElement("li");a="undefined"==typeof a?{value:this.$text.value,completed:this.$completed.checked}:a,b.textContent=a.value,b.classList.add(a.completed?"completed":"active"),this.$list.appendChild(b)},clear:function(){this.empty(this.$list),e.set("Main:list",[])},load:function(){e.has("Main:form")&&c.unserialize(this.$form,e.get("Main:form")),this.todos=e.has("Main:list")?e.get("Main:list"):[],this.todos.forEach(function(a){this.add(a)},this)},submit:function(a){a.preventDefault();var b=c.serialize(this.$form);this.add(b),this.todos.push(b),e.set("Main:list",this.todos),this.reset()},reset:function(){c.unserialize(this.$form,{value:"",completed:!1})}}))},{"../../core/controller":2,"../../core/form":5,"../../core/manager":6,"../../core/storage":7}]},{},[10]);